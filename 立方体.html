<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>图形学</title>
  </head>
  <body>
    <canvas id="tutorial" width="150" height="150"></canvas>

    <script>
      //   ctx.fillRect(30, 30, 55, 50);


      var canvas = document.getElementById("tutorial");
        var ctx = canvas.getContext("2d");
        ctx.fillStyle = "rgba(0, 0, 0, 0.5)";



      function compute(x, y, z, j) {
        let x1 = 0;
        let y1 = 0;

        j = 5;
        z += 0 

        if (j > z) {
          console.error("j必须小于z");
        }

        x1 = (j * x) / z;
        y1 = (j * y) / z;

        x1 = parseInt((15 / 2 + x1) * 10);
        y1 = parseInt((15 / 2 - y1) * 10);

        return [x1, y1];
      }


      function dra() {
       

        ctx.clearRect(0, 0, 150, 150); 

        let A = compute(transX(-5, 10).x, -5, transX(-5, 10).y, 5);
        let B = compute(transX(5, 10).x, -5, transX(5, 10).y, 5);
        let C = compute(transX(5, 20).x, -5, transX(5, 20).y, 5);
        let D = compute(transX(-5, 20).x, -5, transX(-5, 20).y, 5);
        let E = compute(transX(-5, 10).x, 5, transX(-5, 10).y, 5);
        let F = compute(transX(5, 10).x, 5, transX(5, 10).y, 5);
        let G = compute(transX(5, 20).x, 5, transX(5, 20).y, 5);
        let H = compute(transX(-5, 20).x, 5, transX(-5, 20).y, 5);

        drawAB(A, B);
        drawAB(B, C);
        drawAB(C, D);
        drawAB(A, D);

        ctx.fillStyle = "rgba(255, 0, 0, 0.3)";

        drawAB(E, F);
        drawAB(F, G);
        drawAB(G, H);
        drawAB(H, E);
        ctx.fillStyle = "rgba(0, 0, 0, 0.3)";
        drawAB(A, E);
        drawAB(B, F);
        drawAB(C, G);
        drawAB(D, H);
      }

      function drawLine  (a, b)  {
        
        ctx.beginPath();
        ctx.moveTo(a.x, a.y);
        ctx.lineTo(b.x, b.y);
        ctx.closePath();
        ctx.stroke();
      };

      function drawAB(tag1, tag2) {
        drawLine({ x: tag1[0], y: tag1[1] }, { x: tag2[0], y: tag2[1] });
      }

      function transX(x, y) {
        y-=15
        x = x * Math.cos(du) + Math.sin(du) * y;
        y = y * Math.cos(du) - Math.sin(du) * x;
        return { x: x, y: y+15 };
      }


      ppp = (2* Math.PI)/200 
      let index = 0
      let du = 2* Math.PI 

      setInterval(()=>{
        du -=  ppp   

        if(index==200){
            index=0
            du=2* Math.PI 
        }
        else{
            index++
        }
        console.log(du)
        draw()
      },100)

     
    </script>
  </body>
</html>
